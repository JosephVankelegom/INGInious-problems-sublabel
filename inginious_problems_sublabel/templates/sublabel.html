{# This file is part of INGInious. See the LICENSE and the COPYRIGHTS files for #}
{# more information about the licensing of this file. #}
<style>

    /* Define here the variable color and reuse them everywhere, better code ...*/



</style>

<script type="text/javascript">
    var dataExercise = {{ data|safe }}
</script>

{{ header | safe }}

<div class="form-group row">
    <label for="code-{{inputId}}" class="col-sm-2 control-label">Code</label>
    <div class="col-sm-10">
        <div class="container mt-5">
            <div class="textarea-container">
                <div class="line-numbers" id="line_code-{{inputId}}"></div>
                <textarea id="code-{{inputId}}" class="form-control custom-textarea" readonly>{{ code | safe }}</textarea>
            </div>
        </div>
    </div>
</div>

{#
<div class="form-group row">
    <label for="code-{{inputId}}" class="col-sm-2 "></label>
    <div class="col-sm-10"><textarea id="code-{{inputId}}" class="form-control"
                                     onclick='this.style.height= ""; this.style.height = this.scrollHeight + "px"'
                                     style="width: 1044px; min-height: 150px; border-color: darkgray; padding-left: 35px;"  readonly>{{ code | safe }}</textarea>
    </div>
</div>
#}




<div class="row-cols-1" id="label-div-{{ inputId }}">
</div>


<div class="form-group row">
    <label for="answer-{{ inputId }}" class="col-sm-2 control-label"></label>
    <div class="col-sm-10">
        <input type="text" name = "{{ inputId }}" class="form-control" id="answer-{{ inputId }}" hidden/>
    </div>
</div>


<div id="context-menu-{{inputId}}" class="context-menu">
    <ul id="context-menu-ul-{{inputId}}"></ul>
</div>




<script>
    $(document).ready()
    {

        let textarea = $("#code-{{inputId}}")
        let answerarea = $("#answer-{{inputId}}")
        let lineNumbers = $("#line_code-{{inputId}}")
        let highlightValue = {};
        let labelNameID = {};
        let highlightColor = {};

        for (const [id, value] of Object.entries(dataExercise)) {
            labelNameID[id] = value["label"];
            highlightColor[id] = value["color"];

        }

        let exercise = new SubLabel(textarea, answerarea, highlightValue, labelNameID, highlightColor, "{{ inputId }}", null, 0, "student", lineNumbers);
        contextMenuStart(textarea, "{{ inputId }}", null)
        exercise.startStudent();
        answerarea.trigger('change')
    }
</script>

